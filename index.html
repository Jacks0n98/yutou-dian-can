<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>å¤§å±±è„šèŠ‹å¤´é¥­ä¸“å–åº— - ç®€æ´ç‚¹é¤ç³»ç»Ÿ</title>
  <style>
    body { font-family: sans-serif; background: #f8f8f8; padding: 20px; }
    h2 { color: #5a2d0c; }
    .section { background: #fff; padding: 15px; border-radius: 8px; margin-bottom: 20px; }
    label { display: block; margin: 8px 0 4px; }
    input[type="number"], textarea { width: 100%; padding: 5px; font-size: 16px; }
    button { padding: 10px 15px; font-size: 16px; margin-top: 15px; }
    .output { white-space: pre-wrap; background: #eee; padding: 15px; border-radius: 5px; margin-top: 20px; }
  </style>
</head>
<body>

  <h2>ğŸ  å¤§å±±è„šèŠ‹å¤´é¥­ä¸“å–åº— - ç‚¹é¤ç³»ç»Ÿ</h2>

  <div class="section">
    <label for="numPeople">ğŸ‘¥ ç”¨é¤äººæ•°ï¼š</label>
    <input type="number" id="numPeople" min="1" max="50" value="1">

    <label for="numSoups">ğŸ¥£ æ±¤å…±ç”¨å‡ ç¢—ï¼š</label>
    <input type="number" id="numSoups" min="1" max="10" value="1">

    <div id="soupArea"></div>

    <label for="riceWhite">ğŸš ç™½é¥­å‡ ç¢—ï¼š</label>
    <input type="number" id="riceWhite" min="0" value="0">

    <label for="riceTaro">ğŸ  èŠ‹å¤´é¥­å‡ ç¢—ï¼š</label>
    <input type="number" id="riceTaro" min="0" value="0">

    <label for="remark">ğŸ“ æ•´å•å¤‡æ³¨ï¼š</label>
    <textarea id="remark" placeholder="å¦‚ï¼šä¸è¦è¾£ã€å¦å¤–æ‰“åŒ…ä¸€ç¢—é¥­ç­‰..."></textarea>

    <button onclick="generateSummary()">âœ… ç”Ÿæˆè®¢å•</button>
  </div>

  <div class="output" id="summaryArea"></div>

  <script>
    const ingredients = ["çŒªè‚", "çŒªè…°", "çŒªè‚ ", "çŒªè‚š", "çŒªèˆŒå¤´", "ç˜¦è‚‰", "è‚¥è‚‰", "èœ", "è‚‰ä¸¸"];
    let orderNumber = parseInt(localStorage.getItem("orderNumber") || "0");

    document.getElementById("numSoups").addEventListener("input", generateSoupInputs);

    function generateSoupInputs() {
      const soupArea = document.getElementById("soupArea");
      const count = parseInt(document.getElementById("numSoups").value);
      soupArea.innerHTML = '';

      for (let i = 0; i < count; i++) {
        const div = document.createElement("div");
        div.className = "section";
        div.innerHTML = `<strong>ğŸ¥£ ç¬¬ ${i + 1} ç¢—æ±¤</strong><br>
          <label>ğŸ‘¤ å…±ç”¨äººæ•°ï¼š</label>
          <input type="number" min="1" max="20" id="soupPeople_${i}" value="1">
          <label>âŒ å¿Œå£ææ–™ï¼š</label>` +
          ingredients.map(ing => `<label><input type="checkbox" name="soupNo_${i}" value="${ing}"> ${ing}</label>`).join('');
        soupArea.appendChild(div);
      }
    }

    generateSoupInputs();

    function generateSummary() {
      const numPeople = parseInt(document.getElementById("numPeople").value);
      const numSoups = parseInt(document.getElementById("numSoups").value);
      const riceWhite = parseInt(document.getElementById("riceWhite").value);
      const riceTaro = parseInt(document.getElementById("riceTaro").value);
      const remark = document.getElementById("remark").value.trim();
      const today = new Date().toISOString().split('T')[0];

      // è®¢å•ç¼–å·è½®è¯¢ 1~50
      orderNumber = (orderNumber % 50) + 1;
      localStorage.setItem("orderNumber", orderNumber);

      let output = `ğŸ“… æ—¥æœŸï¼š${today}\nğŸ§¾ è®¢å•ç¼–å·ï¼š${orderNumber}\n`;
      output += `ğŸ‘¥ ç”¨é¤äººæ•°ï¼š${numPeople}äºº\n\nğŸ¥£ æ±¤ç±»åˆ†é…ï¼š\n`;

      for (let i = 0; i < numSoups; i++) {
        const soupCount = document.getElementById(`soupPeople_${i}`).value;
        const noItems = Array.from(document.querySelectorAll(`input[name="soupNo_${i}"]:checked`)).map(cb => cb.value);
        output += `  - ç¬¬ ${i + 1} ç¢—ï¼š${soupCount}äººå…±ç”¨`;
        output += noItems.length ? `ï¼ˆä¸åƒï¼š${noItems.join("ã€")}ï¼‰` : 'ï¼ˆæ— å¿Œå£ï¼‰';
        output += '\n';
      }

      output += `\nğŸš é¥­ç±»ï¼šç™½é¥­ ${riceWhite} ç¢—ï¼ŒèŠ‹å¤´é¥­ ${riceTaro} ç¢—\n`;
      output += `\nğŸ“ å¤‡æ³¨ï¼š${remark || "æ— "}\n`;

      document.getElementById("summaryArea").textContent = output;
    }
  </script>

</body>
</html>
